import os
import pandas as pd

#Import package for data analysis
from replace_with_warning import *
from lib_gather_data import *
from maps_lib import *

#ploting capacities
import matplotlib as mpl
import matplotlib.pyplot as plt 


#Default options for plots: 
#this controls the font used in the legend
font = {'family' : 'sans serif',
    'size'   : 26}
plt.rc('font', **font)
mpl.rcParams['xtick.labelsize'] = 20
    
model  = os.getcwd() #get current directory

# Load files
tikina_all = pd.read_excel(model+'/../../country_docs/FJ/fji_pcode_list_v03.xls',sheetname='NEW TIKINA ALPHABETICAL',usecols=['TIKINA','PROVINCE','Admin 2 Pcode'])
tikina_all.columns = ['tikina','province','admin_2_pcode']

tikina_no_coast = pd.read_excel(model+'/../../country_docs/FJ/tikina_no_coast.xlsx',usecols=['tikina_no_coast'])
tikina_no_coast.columns = ['tikina']
tikina_no_coast['has_coast'] = False

# merge files
tikina_all = pd.merge(tikina_all.reset_index(),tikina_no_coast.reset_index(),on=['tikina'],how='outer').reset_index().set_index('tikina')
tikina_all = tikina_all.drop(['index','index_x','index_y'],axis=1)
tikina_all['has_coast'] = tikina_all['has_coast'].fillna(True)

tikina_all.loc[tikina_all.has_coast==True, 'has_coast_col'] = 1.
tikina_all.loc[tikina_all.has_coast==False,'has_coast_col'] = 0.

svg_file_path = '../map_files/FJ/FIJI_Tikina_2.svg'

make_map_from_svg(
    tikina_all.has_coast_col, #data
    svg_file_path,                  #path to blank map
    outname='coasts',  #base name for output  (will create img/map_of_asset_risk.png, img/legend_of_asset_risk.png, etc.)
    color_maper=plt.cm.get_cmap('Blues'), #color scheme (from matplotlib. Chose them from http://colorbrewer2.org/)
    label='coasts',
    new_title='Map of coasts in Fiji',  #title for the colored SVG
    do_qualitative=False,
    res=2000)

